import{j as e}from"./vendor-markdown-BC8sZGMk.js";import{r as c}from"./vendor-react-BDu5rya1.js";import{s as F}from"./index-w5y7RdLa.js";import{I as B,J as R,X as se,w as ae,K as re,O as te,z as y,p as ne,E as D,y as le,Q as ie}from"./vendor-ui-CDd0elD4.js";import"./vendor-query-DenH8THg.js";const oe=[{id:"ramstein",name:"Ramstein AB"},{id:"stuttgart",name:"USAG Stuttgart"},{id:"kaiserslautern",name:"KMC Area"},{id:"wiesbaden",name:"USAG Wiesbaden"},{id:"grafenwoehr",name:"USAG Bavaria"},{id:"spangdahlem",name:"Spangdahlem AB"}];function $(r){return{id:r.id,name:r.name,category:r.category,subcategory:r.subcategory,description:r.description,location:r.location,address:r.address,phone:r.phone,email:r.email,website:r.website,englishFluency:r.english_fluency,verified:r.verified,featured:r.featured,featuredTier:r.featured_tier,baseDistance:r.base_distance,notes:r.notes,imageUrl:r.image_url,status:r.status,basesServed:r.bases_served,latitude:r.latitude,longitude:r.longitude,googleMapsUrl:r.google_maps_url,createdAt:r.created_at,updatedAt:r.updated_at,city:r.city}}const P=(r,j)=>`https://www.google.com/maps/search/?api=1&query=${r},${j}`,b=r=>{if(!r)return!0;try{return new URL(r),!0}catch{return!1}},de=()=>({id:"new-"+Date.now(),name:"",category:"",subcategory:"",description:"",location:"",address:"",phone:"",email:"",website:"",englishFluency:"conversational",verified:!1,featured:!1,featuredTier:"free",notes:"",imageUrl:"",status:"pending",basesServed:[],latitude:void 0,longitude:void 0,googleMapsUrl:"",city:""}),ce=r=>r?r.toLowerCase().trim().replace(/\s+/g,"-").replace(/_/g,"-"):"";function pe(){const[r,j]=c.useState([]),[u,N]=c.useState(0),[a,f]=c.useState(null),[w,q]=c.useState(""),[h,V]=c.useState("pending"),[v,i]=c.useState("idle"),[O,W]=c.useState(!0),[A,L]=c.useState(!1),[C,g]=c.useState([]),[o,S]=c.useState(!1);c.useEffect(()=>{E()},[]);async function E(){try{const{data:s,error:t}=await F.from("businesses").select("*").order("name");if(t)throw t;const n=s.map($);if(j(n),n.length>0){const d=n.findIndex(m=>m.status==="pending"),x=d!==-1?d:0;f(n[x]),N(x)}}catch(s){console.error("Error loading businesses:",s)}finally{W(!1)}}const k=s=>{const t=[];return s.address||t.push("address"),s.phone||t.push("phone"),s.email||t.push("email"),s.website||t.push("website"),(!s.latitude||!s.longitude)&&t.push("coordinates"),s.googleMapsUrl||t.push("googleMapsUrl"),(!s.description||s.description.length<20)&&t.push("description"),t},p=c.useMemo(()=>r.filter(s=>{const t=s.name.toLowerCase().includes(w.toLowerCase())||s.location.toLowerCase().includes(w.toLowerCase());return h==="all"?t:h==="missing-data"?t&&k(s).length>0:h==="unverified"?t&&!s.verified:h==="pending"?t&&s.status==="pending":h==="no-coordinates"?t&&(!s.latitude||!s.longitude):h==="no-contact"?t&&!s.phone&&!s.email&&!s.website:t}),[r,w,h]);c.useEffect(()=>{if(!o&&p.length>0){const s=p[u];f(s),g([])}},[u,p,o]);const l=(s,t)=>{a&&f(n=>n?{...n,[s]:t}:null)},z=(s,t)=>{if(!a)return;let n=a.basesServed?[...a.basesServed]:[];t?n.includes(s)||n.push(s):n=n.filter(d=>d!==s),l("basesServed",n)},K=s=>{const t=[];return s.website&&!b(s.website)&&t.push("Website URL is invalid."),s.googleMapsUrl&&!b(s.googleMapsUrl)&&t.push("Google Maps URL is invalid."),(!s.name||!s.location||!s.category)&&t.push("Name, Location, and Category are required fields."),t},J=async()=>{if(!a)return;const s=K(a);if(s.length>0){g(s),i("error"),setTimeout(()=>i("idle"),5e3);return}i("saving"),g([]);try{const t={name:a.name,category:a.category,subcategory:ce(a.subcategory||""),location:a.location,address:a.address,phone:a.phone,email:a.email,website:a.website,description:a.description,english_fluency:a.englishFluency,verified:a.verified,featured:a.featured,featured_tier:a.featuredTier,latitude:a.latitude,longitude:a.longitude,google_maps_url:a.googleMapsUrl,notes:a.notes,image_url:a.imageUrl,status:a.status,bases_served:a.basesServed,updated_at:new Date().toISOString()};if(o){const{data:n,error:d}=await F.from("businesses").insert({...t,created_at:new Date().toISOString()}).select();if(d){console.error("Error inserting business:",d),g([`Insert failed: ${d.message}`]),i("error"),setTimeout(()=>i("idle"),5e3);return}if(n&&n.length>0){const x=$(n[0]);j(m=>[...m,x]),f(x),S(!1),i("saved"),setTimeout(()=>{i("idle"),E()},2e3)}}else{const{data:n,error:d}=await F.from("businesses").update(t).eq("id",a.id).select();if(d){console.error("Error updating business:",d),g([`Update failed: ${d.message}`]),i("error"),setTimeout(()=>i("idle"),5e3);return}if(!n||n.length===0){g(["Update returned no rows. Check console for details."]),i("error"),setTimeout(()=>i("idle"),5e3);return}j(x=>x.map(m=>m.id===a.id?a:m)),i("saved"),setTimeout(()=>i("idle"),2e3)}}catch(t){console.error("Error saving:",t),g(["A database error occurred. See console for details."]),i("error"),setTimeout(()=>i("idle"),5e3)}},_=()=>{const s=de();f(s),S(!0),i("idle"),g([])},Q=()=>{S(!1),p.length>0&&f(p[u])},X=()=>{u<p.length-1&&(N(u+1),i("idle"))},H=()=>{u>0&&(N(u-1),i("idle"))},Y=()=>{if(a&&a.latitude&&a.longitude){const s=P(a.latitude,a.longitude);l("googleMapsUrl",s)}},Z=async()=>{if(!a?.address){alert("Please enter an address first");return}L(!0),g([]);try{const s=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(a.address+", Germany")}`,n=await(await fetch(s)).json();if(n&&n.length>0){const{lat:d,lon:x}=n[0],m=parseFloat(d),M=parseFloat(x),ee=P(m,M);f(I=>I?{...I,latitude:m,longitude:M,googleMapsUrl:ee}:null),alert(`Coordinates added successfully! Latitude: ${m}, Longitude: ${M}`)}else alert("Could not find coordinates for this address. Try adding more detail.")}catch(s){console.error("Geocoding error:",s),alert("Error getting coordinates. Please try again.")}finally{L(!1)}};if(O)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading businesses..."})]})});if(!a)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No businesses found matching current filter/search."}),e.jsxs("button",{onClick:_,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 mx-auto",children:[e.jsx(R,{className:"w-5 h-5"}),"Add New Business"]})]})});const U=k(a),T=Math.round((7-U.length)/7*100),G=r.filter(s=>s.status==="pending").length;return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Business Data Entry"}),e.jsx("p",{className:"text-gray-600",children:o?"Add a new business to the directory":"Fill in missing information for businesses"})]}),e.jsx("button",{onClick:o?Q:_,className:`px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition ${o?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 text-white hover:bg-green-700"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-5 h-5"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5"}),"Add New Business"]})})]})}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search businesses...",value:w,onChange:({target:s})=>q(s.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:({target:s})=>{V(s.value),N(0)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsxs("option",{value:"all",children:["All Businesses (",r.length,")"]}),e.jsxs("option",{value:"pending",children:["Pending Review (",G,")",G>0&&" ðŸ””"]}),e.jsxs("option",{value:"missing-data",children:["Missing Data (",r.filter(s=>k(s).length>0).length,")"]}),e.jsxs("option",{value:"unverified",children:["Unverified (",r.filter(s=>!s.verified).length,")"]}),e.jsxs("option",{value:"no-coordinates",children:["No Coordinates (",r.filter(s=>!s.latitude||!s.longitude).length,")"]}),e.jsxs("option",{value:"no-contact",children:["No Contact Info (",r.filter(s=>!s.phone&&!s.email&&!s.website).length,")"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:H,disabled:u===0,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:[u+1," of ",p.length]}),e.jsx("button",{onClick:X,disabled:u===p.length-1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completion:"}),e.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${T}%`}})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:[T,"%"]})]})]}),U.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2 mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Missing Fields:"}),e.jsx("p",{className:"text-sm text-amber-700",children:U.join(", ")})]})]}),C.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Validation Errors:"}),e.jsx("ul",{className:"text-sm text-red-700 list-disc ml-4",children:C.map((s,t)=>e.jsx("li",{children:s},t))})]})]})]})]}),o&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Adding New Business"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Fill in as much information as possible. Required fields: Name, Category, Location"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:[o?"New Business":a.name,a.status==="pending"&&!o&&e.jsx("span",{className:"ml-3 px-3 py-1 text-sm bg-amber-100 text-amber-800 rounded-full",children:"Pending Review"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:({target:s})=>l("name",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsx("input",{type:"text",value:a.category||"",onChange:({target:s})=>l("category",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),e.jsx("input",{type:"text",value:a.subcategory||"",onChange:({target:s})=>l("subcategory",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., car-dealerships"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:a.location,onChange:({target:s})=>l("location",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Street Address ",!a.address&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a.address||"",onChange:({target:s})=>l("address",s.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full street address"}),e.jsxs("button",{onClick:Z,disabled:!a.address||A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap flex items-center gap-2",children:[A?e.jsx(B,{className:"w-4 h-4 animate-spin"}):e.jsx(ne,{className:"w-4 h-4"}),"Get Coords"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone ",!a.phone&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsx("input",{type:"text",value:a.phone||"",onChange:({target:s})=>l("phone",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+49 123 456789"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",!a.email&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsx("input",{type:"email",value:a.email||"",onChange:({target:s})=>l("email",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contact@business.com"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Website ",!a.website&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:a.website||"",onChange:({target:s})=>l("website",s.value),className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.website&&!b(a.website)?"border-red-500":"border-gray-300"}`,placeholder:"https://example.com"}),a.website&&b(a.website)&&e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:e.jsx(D,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",(!a.description||a.description.length<20)&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Too short"})]}),e.jsx("textarea",{value:a.description||"",onChange:({target:s})=>l("description",s.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Detailed description of the business..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.description?.length||0," characters"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Latitude ",!a.latitude&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsx("input",{type:"number",step:"0.000001",value:a.latitude??"",onChange:({target:s})=>l("latitude",s.value?parseFloat(s.value):void 0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"48.1234"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Longitude ",!a.longitude&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsx("input",{type:"number",step:"0.000001",value:a.longitude??"",onChange:({target:s})=>l("longitude",s.value?parseFloat(s.value):void 0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"9.5678"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Google Maps URL ",!a.googleMapsUrl&&e.jsx("span",{className:"text-amber-600",children:"âš ï¸ Missing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:a.googleMapsUrl||"",onChange:({target:s})=>l("googleMapsUrl",s.value),className:`flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.googleMapsUrl&&!b(a.googleMapsUrl)?"border-red-500":"border-gray-300"}`,placeholder:"https://www.google.com/maps/search/?api=1&query=lat,lon"}),a.googleMapsUrl&&b(a.googleMapsUrl)&&e.jsx("a",{href:a.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Y,disabled:!a.latitude||!a.longitude,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:"Generate"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bases Served"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:oe.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.basesServed?.includes(s.id)||!1,onChange:({target:t})=>z(s.id,t.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.name})]},s.id))})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"English Fluency"}),e.jsxs("select",{value:a.englishFluency||"conversational",onChange:({target:s})=>l("englishFluency",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"fluent",children:"Fluent"}),e.jsx("option",{value:"conversational",children:"Conversational"}),e.jsx("option",{value:"basic",children:"Basic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:a.status||"active",onChange:({target:s})=>l("status",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Tier"}),e.jsxs("select",{value:a.featuredTier||"free",onChange:({target:s})=>l("featuredTier",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"sponsored",children:"Sponsored"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:a.notes||"",onChange:({target:s})=>l("notes",s.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Internal notes..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),e.jsx("input",{type:"url",value:a.imageUrl||"",onChange:({target:s})=>l("imageUrl",s.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"md:col-span-2 flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.verified||!1,onChange:({target:s})=>l("verified",s.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verified"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.featured||!1,onChange:({target:s})=>l("featured",s.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Featured"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[v==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:o?"Business added successfully!":"Changes saved successfully!"})]}),v==="error"&&C.length===0&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Database Error saving changes"})]}),v==="error"&&C.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Validation Failed. See error section above."})]})]}),e.jsx("button",{onClick:J,disabled:v==="saving",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-semibold transition",children:v==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5 animate-spin"}),o?"Adding...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5"}),o?"Add Business":"Save Changes"]})})]})})]})})}export{pe as default};
