import{j as e}from"./vendor-markdown-BC8sZGMk.js";import{r as t}from"./vendor-react-BDu5rya1.js";import{s as $,u as F}from"./index-X6OjkqCn.js";import{S as D}from"./SEO-C0mUeiKB.js";import{X as M,b as N,f as L,V as A}from"./vendor-ui-Vsc3AOGk.js";import"./vendor-query-DenH8THg.js";async function B(){const{data:o,error:d}=await $.from("day_trips").select("*").order("base_name",{ascending:!0}).order("name",{ascending:!0});if(d)throw console.error("Error fetching day trips:",d),new Error("Failed to load day trip data from the database.");return o.reduce((n,i)=>{let l=n.find(x=>x.baseId===i.base_id);return l||(l={baseId:i.base_id,baseName:i.base_name,trips:[]},n.push(l)),l.trips.push(i),n},[])}function R(){const{selectedBase:o}=F(),[d,h]=t.useState(""),[n,i]=t.useState("all"),[l,x]=t.useState("all"),[c,g]=t.useState("all"),[m,w]=t.useState([]),[k,p]=t.useState(!0),[v,y]=t.useState(null);t.useEffect(()=>{async function r(){p(!0),y(null);try{const a=await B();w(a)}catch(a){console.error("Failed to load day trips:",a),y("Failed to load day trips. Please try again later.")}finally{p(!1)}}r()},[]);const u=t.useMemo(()=>o==="all"?m:m.filter(r=>r.baseId===o),[o,m]),C=t.useMemo(()=>{const r=new Set;return m.forEach(a=>{a.trips.forEach(s=>{s.best_for.forEach(f=>r.add(f))})}),Array.from(r).sort()},[m]),b=t.useMemo(()=>{const r=[];return u.forEach(a=>{a.trips.forEach(s=>{const f=d===""||s.name.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase()),S=n==="all"||s.difficulty===n,T=l==="all"||s.cost===l,_=c==="all"||s.best_for.includes(c);f&&S&&T&&_&&r.push({baseName:a.baseName,trip:s})})}),r},[u,d,n,l,c]),j=()=>{h(""),i("all"),x("all"),g("all")},E=d!==""||n!=="all"||l!=="all"||c!=="all";return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--brand-bg)] pt-16",children:e.jsx("p",{className:"text-xl text-[var(--brand-dark)]",children:"Loading day trips..."})}):v?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--brand-bg)] pt-16",children:e.jsxs("p",{className:"text-xl text-red-600",children:["Error: ",v]})}):e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Day Trips from US Military Bases",description:"Discover amazing day trips from US military bases in Germany. Find castles, cities, nature, and cultural experiences within easy reach.",keywords:"day trips Germany, military base travel, weekend trips Europe, castles Germany, things to do Germany"}),e.jsxs("div",{className:"min-h-screen bg-[var(--brand-bg)] pt-16",children:[e.jsx("div",{className:"bg-gradient-to-r from-[var(--brand-primary)] to-[var(--brand-dark)] text-[var(--brand-light)] py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"ðŸ—ºï¸ Day Trips & Weekend Getaways"}),e.jsx("p",{className:"text-xl text-[var(--brand-bg-alt)] max-w-3xl",children:"Explore incredible destinations within a few hours of your base. From medieval castles to vibrant cities, discover the best of Europe on a day trip."})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8 border border-[var(--border)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-[var(--brand-dark)] mb-2",children:"Search Destinations"}),e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:d,onChange:r=>h(r.target.value),className:"w-full px-4 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--brand-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[var(--brand-dark)] mb-2",children:"Category"}),e.jsxs("select",{value:c,onChange:r=>g(r.target.value),className:"w-full px-4 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--brand-primary)]",children:[e.jsx("option",{value:"all",children:"All Categories"}),C.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[var(--brand-dark)] mb-2",children:"Difficulty"}),e.jsxs("select",{value:n,onChange:r=>i(r.target.value),className:"w-full px-4 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--brand-primary)]",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Challenging",children:"Challenging"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[var(--brand-dark)] mb-2",children:"Budget"}),e.jsxs("select",{value:l,onChange:r=>x(r.target.value),className:"w-full px-4 py-2 border border-[var(--border)] rounded-lg focus:ring-2 focus:ring-[var(--brand-primary)]",children:[e.jsx("option",{value:"all",children:"All Budgets"}),e.jsx("option",{value:"$",children:"$ Budget-Friendly"}),e.jsx("option",{value:"$$",children:"$$ Moderate"}),e.jsx("option",{value:"$$$",children:"$$$ Premium"})]})]})]}),E&&e.jsxs("button",{onClick:j,className:"mt-4 flex items-center gap-2 text-sm text-[var(--muted-foreground)] hover:text-[var(--brand-dark)] transition",children:[e.jsx(M,{size:16}),"Clear all filters"]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-[var(--muted-foreground)]",children:["Found ",e.jsx("strong",{className:"text-[var(--brand-dark)]",children:b.length})," day trip",b.length!==1?"s":"",o!=="all"&&u.length>0&&` from ${u[0].baseName}`]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(({baseName:r,trip:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow overflow-hidden border border-[var(--border)]",children:[a.image_url?e.jsx("img",{src:a.image_url,alt:`Image of ${a.name}`,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"h-48 bg-gradient-to-br from-[var(--brand-primary)] to-[var(--brand-dark)] flex items-center justify-center",children:e.jsx(N,{className:"w-16 h-16 text-[var(--brand-light)] opacity-50"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--brand-dark)] mb-1",children:a.name}),o==="all"&&e.jsxs("p",{className:"text-sm text-[var(--muted-foreground)]",children:["From ",r]})]}),e.jsx("p",{className:"text-[var(--muted-foreground)] text-sm mb-4 line-clamp-3",children:a.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--muted-foreground)]",children:[e.jsx(L,{size:16,className:"text-[var(--brand-primary)]"}),e.jsxs("span",{children:[a.drive_time," drive (",a.distance,")"]})]}),a.train_time&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--muted-foreground)]",children:[e.jsx(A,{size:16,className:"text-[var(--brand-button)]"}),e.jsxs("span",{children:[a.train_time," by train"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.difficulty==="Easy"?"bg-[var(--brand-button)] bg-opacity-20 text-[var(--brand-dark)]":a.difficulty==="Moderate"?"bg-[var(--brand-gold)] bg-opacity-30 text-[var(--brand-dark)]":"bg-[var(--brand-primary)] bg-opacity-20 text-[var(--brand-dark)]"}`,children:a.difficulty}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--secondary)] text-[var(--secondary-foreground)]",children:a.cost})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.best_for.slice(0,3).map(s=>e.jsx("span",{className:"text-xs px-2 py-1 bg-[var(--muted)] text-[var(--muted-foreground)] rounded",children:s},s)),a.best_for.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 text-[var(--muted-foreground)]",children:["+",a.best_for.length-3," more"]})]})]})]},a.id))}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-[var(--muted)] mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--brand-dark)] mb-2",children:"No day trips found"}),e.jsx("p",{className:"text-[var(--muted-foreground)] mb-4",children:"Try adjusting your filters or search terms"}),e.jsx("button",{onClick:j,className:"text-[var(--brand-primary)] hover:text-[var(--brand-dark)] font-semibold transition",children:"Clear all filters"})]})]})]})]})}export{R as default};
