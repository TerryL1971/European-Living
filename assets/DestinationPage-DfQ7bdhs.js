import{j as e,M as y,a as k,b as S,r as C}from"./vendor-markdown-BC8sZGMk.js";import{r as f,i as E,d as P}from"./vendor-react-BDu5rya1.js";import{d as B}from"./index-Ba7oaidt.js";import{T as M,b as N}from"./TableOfContents-V_DsgC71.js";import{N as A,H,h as D}from"./vendor-ui-CDd0elD4.js";import"./vendor-query-DenH8THg.js";function F({content:m}){const[x,h]=f.useState(new Set),v=(()=>{const t=[],l=m.split(`
`);let s=null,n=[];const a=new Set,g=()=>{s&&(s.content=n.join(`
`).trim(),t.push(s),n=[])},o=i=>{const d=i.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");let c=d,u=1;for(;a.has(c);)c=`${d}-${u}`,u++;return a.add(c),c};return l.forEach(i=>{const d=i.match(/^##\s+(.+)$/),c=i.match(/^###\s+(.+)$/);if(d||c){g();const u=d?d[1]:c[1],$=d?2:3;s={id:o(u),title:u,content:"",level:$}}else s&&n.push(i)}),g(),t})(),b=t=>{h(l=>{const s=new Set(l);return s.has(t)?s.delete(t):s.add(t),s})},j=(t,l=200)=>t.length<=l?t:t.substring(0,l).trim()+"...",p=()=>{h(new Set(v.map(t=>t.id)))},r=()=>{h(new Set)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:p,className:"text-sm px-3 py-1 bg-[var(--brand-primary)] text-white rounded hover:bg-[var(--brand-dark)] transition",children:"Expand All"}),e.jsx("button",{onClick:r,className:"text-sm px-3 py-1 bg-gray-200 text-[var(--brand-dark)] rounded hover:bg-gray-300 transition",children:"Collapse All"})]}),v.map(t=>{const l=x.has(t.id),s=j(t.content),n=t.content.length>200;return e.jsxs("div",{className:`border border-gray-200 rounded-lg overflow-hidden ${t.level===3?"ml-4":""}`,children:[e.jsxs("button",{onClick:()=>b(t.id),className:"w-full text-left p-4 bg-white hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("h3",{className:`font-semibold text-[var(--brand-dark)] ${t.level===2?"text-lg":"text-base"}`,children:t.title}),e.jsx("svg",{className:`w-5 h-5 text-[var(--brand-primary)] transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 pb-4 bg-white",children:l?e.jsx("div",{className:"prose prose-sm max-w-none text-[var(--brand-dark)]",children:e.jsx(y,{remarkPlugins:[C],rehypePlugins:[k,S],children:t.content})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[var(--brand-dark)] opacity-70 text-sm mb-2",children:s}),n&&e.jsx("button",{onClick:()=>b(t.id),className:"text-[var(--brand-primary)] hover:underline text-sm font-medium",children:"Read more →"})]})})]},t.id)})]})}function q(){const{id:m}=E(),x=P(),[h,w]=f.useState(null),[v,b]=f.useState(!0),[j,p]=f.useState(null),r=B.find(n=>n.id===m);if(f.useEffect(()=>{(async()=>{if(r){b(!0),p(null);try{const a=await N({destination:r.name,published:!0,limit:1});if(a&&a.length>0)w(a[0]);else{const o=(await N({published:!0})).find(i=>i.slug===m);o?w(o):p("No content available for this destination yet.")}}catch(a){console.error("Error loading content:",a),p("Failed to load destination content.")}finally{b(!1)}}})()},[r,m]),!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--brand-bg)]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--brand-dark)] mb-4",children:"Destination not found"}),e.jsx("button",{onClick:()=>x("/"),className:"bg-[var(--brand-primary)] text-white px-5 py-2 rounded-lg shadow hover:bg-[var(--brand-dark)] transition",children:"Back Home"})]})});const t=r.lat&&r.lng?`https://www.google.com/maps/dir/?api=1&destination=${r.lat},${r.lng}`:null,l=r.lat&&r.lng?`https://www.booking.com/searchresults.html?latitude=${r.lat}&longitude=${r.lng}&radius=5`:`https://www.booking.com/searchresults.html?ss=${encodeURIComponent(r.name)}`,s=h?.content||"";return e.jsx("div",{className:"min-h-screen bg-[var(--brand-bg)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 pt-16",children:[e.jsx("button",{onClick:()=>x(-1),className:"text-[var(--brand-primary)] hover:text-[var(--brand-dark)] hover:underline mb-6 block font-medium",children:"← Back to Destinations"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[var(--brand-dark)] mb-2",children:r.name}),e.jsx("p",{className:"text-[var(--brand-dark)] opacity-70",children:r.country})]}),e.jsxs("div",{className:"bg-[var(--brand-bg)] rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-[var(--brand-dark)] mb-3",children:"Plan Your Visit"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t&&e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-[var(--brand-primary)] text-white px-4 py-3 rounded-lg hover:bg-[var(--brand-dark)] transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Get Directions"]}),e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-[var(--brand-gold)] text-[var(--brand-dark)] px-4 py-3 rounded-lg hover:bg-yellow-400 transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Find Hotels"]}),e.jsxs("a",{href:"mailto:european.living.live@gmail.com?subject=Help with Trip Planning",className:"flex-1 bg-white border-2 border-[var(--brand-primary)] text-[var(--brand-primary)] px-4 py-3 rounded-lg hover:bg-[var(--brand-primary)] hover:text-white transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Contact for Questions"]})]})]}),v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-yellow-800",children:j}),e.jsx("p",{className:"text-sm text-yellow-600 mt-2",children:r.description})]}):s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(F,{content:s})}),e.jsx("div",{className:"hidden lg:block prose prose-lg max-w-none text-[var(--brand-dark)] mb-6",children:e.jsx(y,{remarkPlugins:[C],rehypePlugins:[k,S],components:{h2:({children:n,...a})=>{const o=String(n).toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");return e.jsx("h2",{id:o,className:"text-2xl font-bold text-[var(--brand-dark)] mt-8 mb-4",...a,children:n})},h3:({children:n,...a})=>{const o=String(n).toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");return e.jsx("h3",{id:o,className:"text-xl font-semibold text-[var(--brand-dark)] mt-6 mb-3",...a,children:n})}},children:s})})]}):e.jsx("p",{className:"text-[var(--brand-dark)] opacity-80 mb-6",children:r.description||"Discover everything this wonderful destination has to offer. From historical landmarks to modern attractions, there's something for everyone."}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>x("/"),className:"bg-[var(--brand-primary)] text-white px-5 py-2 rounded-lg shadow hover:bg-[var(--brand-dark)] transition",children:"Back Home"})})]})]}),s&&e.jsx("aside",{className:"hidden lg:block w-72 flex-shrink-0",children:e.jsx(M,{content:s})})]})]})})}export{q as default};
