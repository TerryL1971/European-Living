import{j as e,M as N,a as k,b as S,r as C}from"./vendor-markdown-CWIGIRLW.js";import{r as c,i as E,d as I}from"./vendor-react-I_tU4Asr.js";import{d as P}from"./index-KSL3j4uf.js";import{b as y}from"./articleService-Dji_ogm3.js";import{N as B,H as A,g as M}from"./vendor-ui-FYG63vUn.js";import"./vendor-query-DB2EIqeT.js";function R({content:m}){const[d,b]=c.useState([]),[w,v]=c.useState("");c.useEffect(()=>{const o=/^(#{2,3})\s+(.+)$/gm,i=[],s=new Set;let t;const l=r=>{const n=r.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");let a=n,x=1;for(;s.has(a);)a=`${n}-${x}`,x++;return s.add(a),a};for(;(t=o.exec(m))!==null;){const r=t[1].length,n=t[2].trim(),a=l(n);i.push({id:a,text:n,level:r})}b(i)},[m]),c.useEffect(()=>{const o=new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting&&v(t.target.id)})},{rootMargin:"-80px 0px -80% 0px"});return document.querySelectorAll("h2, h3").forEach(s=>o.observe(s)),()=>o.disconnect()},[d]);const g=o=>{const i=document.getElementById(o);if(i){const l=i.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:l,behavior:"smooth"})}};return d.length===0?null:e.jsxs("div",{className:"sticky top-24 bg-white rounded-lg shadow-md p-4 max-h-[calc(100vh-8rem)] overflow-y-auto border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--brand-dark)] mb-3",children:"Table of Contents"}),e.jsx("nav",{children:e.jsx("ul",{className:"space-y-2",children:d.map(o=>e.jsx("li",{className:o.level===3?"ml-4":"",children:e.jsx("button",{onClick:()=>g(o.id),className:`text-left w-full text-sm hover:text-[var(--brand-primary)] transition-colors ${w===o.id?"text-[var(--brand-primary)] font-semibold":"text-[var(--brand-dark)] opacity-70"}`,children:o.text})},o.id))})})]})}function H({content:m}){const[d,b]=c.useState(new Set),v=(()=>{const t=[],l=m.split(`
`);let r=null,n=[];const a=new Set,x=()=>{r&&(r.content=n.join(`
`).trim(),t.push(r),n=[])},h=p=>{const u=p.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");let f=u,j=1;for(;a.has(f);)f=`${u}-${j}`,j++;return a.add(f),f};return l.forEach(p=>{const u=p.match(/^##\s+(.+)$/),f=p.match(/^###\s+(.+)$/);if(u||f){x();const j=u?u[1]:f[1],$=u?2:3;r={id:h(j),title:j,content:"",level:$}}else r&&n.push(p)}),x(),t})(),g=t=>{b(l=>{const r=new Set(l);return r.has(t)?r.delete(t):r.add(t),r})},o=(t,l=200)=>t.length<=l?t:t.substring(0,l).trim()+"...",i=()=>{b(new Set(v.map(t=>t.id)))},s=()=>{b(new Set)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:i,className:"text-sm px-3 py-1 bg-[var(--brand-primary)] text-white rounded hover:bg-[var(--brand-dark)] transition",children:"Expand All"}),e.jsx("button",{onClick:s,className:"text-sm px-3 py-1 bg-gray-200 text-[var(--brand-dark)] rounded hover:bg-gray-300 transition",children:"Collapse All"})]}),v.map(t=>{const l=d.has(t.id),r=o(t.content),n=t.content.length>200;return e.jsxs("div",{className:`border border-gray-200 rounded-lg overflow-hidden ${t.level===3?"ml-4":""}`,children:[e.jsxs("button",{onClick:()=>g(t.id),className:"w-full text-left p-4 bg-white hover:bg-gray-50 transition flex items-center justify-between",children:[e.jsx("h3",{className:`font-semibold text-[var(--brand-dark)] ${t.level===2?"text-lg":"text-base"}`,children:t.title}),e.jsx("svg",{className:`w-5 h-5 text-[var(--brand-primary)] transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 pb-4 bg-white",children:l?e.jsx("div",{className:"prose prose-sm max-w-none text-[var(--brand-dark)]",children:e.jsx(N,{remarkPlugins:[C],rehypePlugins:[k,S],children:t.content})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[var(--brand-dark)] opacity-70 text-sm mb-2",children:r}),n&&e.jsx("button",{onClick:()=>g(t.id),className:"text-[var(--brand-primary)] hover:underline text-sm font-medium",children:"Read more →"})]})})]},t.id)})]})}function G(){const{id:m}=E(),d=I(),[b,w]=c.useState(null),[v,g]=c.useState(!0),[o,i]=c.useState(null),s=P.find(n=>n.id===m);if(c.useEffect(()=>{(async()=>{if(s){g(!0),i(null);try{const a=await y({destination:s.name,published:!0,limit:1});if(a&&a.length>0)w(a[0]);else{const h=(await y({published:!0})).find(p=>p.slug===m);h?w(h):i("No content available for this destination yet.")}}catch(a){console.error("Error loading content:",a),i("Failed to load destination content.")}finally{g(!1)}}})()},[s,m]),!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--brand-bg)]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--brand-dark)] mb-4",children:"Destination not found"}),e.jsx("button",{onClick:()=>d("/"),className:"bg-[var(--brand-primary)] text-white px-5 py-2 rounded-lg shadow hover:bg-[var(--brand-dark)] transition",children:"Back Home"})]})});const t=s.lat&&s.lng?`https://www.google.com/maps/dir/?api=1&destination=${s.lat},${s.lng}`:null,l=s.lat&&s.lng?`https://www.booking.com/searchresults.html?latitude=${s.lat}&longitude=${s.lng}&radius=5`:`https://www.booking.com/searchresults.html?ss=${encodeURIComponent(s.name)}`,r=b?.content||"";return e.jsx("div",{className:"min-h-screen bg-[var(--brand-bg)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 pt-16",children:[e.jsx("button",{onClick:()=>d(-1),className:"text-[var(--brand-primary)] hover:text-[var(--brand-dark)] hover:underline mb-6 block font-medium",children:"← Back to Destinations"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[var(--brand-dark)] mb-2",children:s.name}),e.jsx("p",{className:"text-[var(--brand-dark)] opacity-70",children:s.country})]}),e.jsxs("div",{className:"bg-[var(--brand-bg)] rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-[var(--brand-dark)] mb-3",children:"Plan Your Visit"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t&&e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-[var(--brand-primary)] text-white px-4 py-3 rounded-lg hover:bg-[var(--brand-dark)] transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Get Directions"]}),e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-[var(--brand-gold)] text-[var(--brand-dark)] px-4 py-3 rounded-lg hover:bg-yellow-400 transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Find Hotels"]}),e.jsxs("a",{href:"mailto:european.living.live@gmail.com?subject=Help with Trip Planning",className:"flex-1 bg-white border-2 border-[var(--brand-primary)] text-[var(--brand-primary)] px-4 py-3 rounded-lg hover:bg-[var(--brand-primary)] hover:text-white transition font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Contact for Questions"]})]})]}),v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-yellow-800",children:o}),e.jsx("p",{className:"text-sm text-yellow-600 mt-2",children:s.description})]}):r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(H,{content:r})}),e.jsx("div",{className:"hidden lg:block prose prose-lg max-w-none text-[var(--brand-dark)] mb-6",children:e.jsx(N,{remarkPlugins:[C],rehypePlugins:[k,S],components:{h2:({children:n,...a})=>{const h=String(n).toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");return e.jsx("h2",{id:h,className:"text-2xl font-bold text-[var(--brand-dark)] mt-8 mb-4",...a,children:n})},h3:({children:n,...a})=>{const h=String(n).toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");return e.jsx("h3",{id:h,className:"text-xl font-semibold text-[var(--brand-dark)] mt-6 mb-3",...a,children:n})}},children:r})})]}):e.jsx("p",{className:"text-[var(--brand-dark)] opacity-80 mb-6",children:s.description||"Discover everything this wonderful destination has to offer. From historical landmarks to modern attractions, there's something for everyone."}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>d("/"),className:"bg-[var(--brand-primary)] text-white px-5 py-2 rounded-lg shadow hover:bg-[var(--brand-dark)] transition",children:"Back Home"})})]})]}),r&&e.jsx("aside",{className:"hidden lg:block w-72 flex-shrink-0",children:e.jsx(R,{content:r})})]})]})})}export{G as default};
