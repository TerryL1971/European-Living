import{j as e,M as j,r as N}from"./vendor-markdown-BC8sZGMk.js";import{i as b,d as y,r as n}from"./vendor-react-BDu5rya1.js";import{g as w,a as v}from"./articleService-CLnrGj0s.js";import{p as g,q as _,r as h,s as k}from"./vendor-ui-B4l1nJtM.js";import"./index-Bsvrw4MW.js";import"./vendor-query-DenH8THg.js";const E=({alt:l,src:r,...s})=>r?e.jsx("img",{src:r,alt:l||"",className:"w-full h-auto rounded-lg shadow-md my-8",loading:"lazy",...s}):null;function M(){const{slug:l}=b(),r=y(),[s,m]=n.useState(null),[o,x]=n.useState([]),[p,i]=n.useState(!0),[d,c]=n.useState(null);if(n.useEffect(()=>{async function t(){if(l){i(!0),c(null),m(null),x([]);try{const a=await w(l);if(!a){c("Article not found"),i(!1);return}m(a);const u=await v(a.id,a.category,a.tags,3);x(u)}catch(a){console.error("Error loading article:",a),c("Failed to load article")}finally{i(!1)}}}t()},[l]),p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(d||!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:d||"Article Not Found"}),e.jsxs("button",{onClick:()=>r("/articles"),className:"flex items-center mx-auto text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Back to Articles"]})]})});const f={img:E};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Back"]}),s.category&&e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full mb-4",children:s.category}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:s.subtitle}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[s.author&&e.jsxs("span",{className:"font-medium",children:["By ",s.author]}),s.created_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),s.reading_time_minutes&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"w-4 h-4 mr-1"}),s.reading_time_minutes," min read"]}),e.jsxs("span",{className:"text-gray-400",children:[s.view_count," views"]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.tags.map(t=>e.jsxs("span",{className:"flex items-center bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),t]},t))})]})}),s.featured_image_url&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx("img",{src:s.featured_image_url,alt:s.title,className:"w-full rounded-lg shadow-lg"})}),e.jsx("article",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx("div",{className:"prose prose-lg max-w-none prose-headings:font-bold prose-a:text-blue-600 prose-img:rounded-lg prose-img:shadow-md",children:e.jsx(j,{components:f,remarkPlugins:[N],children:s.content})})}),o.length>0&&e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 border-t",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Related Articles"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:o.map(t=>e.jsxs("button",{onClick:()=>r(`/articles/${t.slug}`),className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 text-left",children:[t.category&&e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mb-2",children:t.category}),e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:t.excerpt}),t.reading_time_minutes&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),t.reading_time_minutes," min read"]})]},t.id))})]})]})}export{M as default};
